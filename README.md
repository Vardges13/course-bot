# üéì Vardges Academy Bot

[![Python](https://img.shields.io/badge/Python-3.12+-3776AB?logo=python&logoColor=white)](https://python.org)
[![aiogram](https://img.shields.io/badge/aiogram-3.x-blue?logo=telegram)](https://aiogram.dev)
[![–ÆKassa](https://img.shields.io/badge/–ÆKassa-payments-blueviolet)](https://yookassa.ru)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Docker](https://img.shields.io/badge/Docker-ready-2496ED?logo=docker&logoColor=white)](Dockerfile)

**Vardges Academy** ‚Äî Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–æ–≤ –ø–æ –ò–ò –¥–ª—è –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª–µ–π.

–ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤, –∫–æ—Ä–∑–∏–Ω–∞, –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –ÆKassa, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–¥–∞—á–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –±–æ—Ç–µ.

üåê **Mini App:** [vardges13.github.io/course-bot](https://vardges13.github.io/course-bot/) ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–∫–∞–¥–µ–º–∏–∏ –≤–Ω—É—Ç—Ä–∏ Telegram

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üìö **–ö–∞—Ç–∞–ª–æ–≥ –∫—É—Ä—Å–æ–≤** | –ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É—Ä—Å–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Ü–µ–Ω–∞–º–∏ |
| üõí **–ö–æ—Ä–∑–∏–Ω–∞** | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ / —É–¥–∞–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤, –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ |
| üí≥ **–û–ø–ª–∞—Ç–∞ –ÆKassa** | Redirect-—Å—Ö–µ–º–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π webhook |
| üì¶ **–ú–æ–∏ –∫—É—Ä—Å—ã** | –ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ + —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã |
| üîß **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–≤, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ |
| üéì **Mini App** | Telegram WebApp —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –∏ —Ç–∞—Ä–∏—Ñ–∞–º–∏ |

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã

<p align="center">
  <img src="webapp/vardges_small.jpg" alt="Vardges Academy" width="250">
</p>

<!-- –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –±–æ—Ç–∞:
<p align="center">
  <img src="docs/screenshot-start.png" width="250" alt="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
  <img src="docs/screenshot-catalog.png" width="250" alt="–ö–∞—Ç–∞–ª–æ–≥">
  <img src="docs/screenshot-cart.png" width="250" alt="–ö–æ—Ä–∑–∏–Ω–∞">
</p>
-->

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **Python 3.12+**
- **[aiogram 3.x](https://aiogram.dev)** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram Bot API
- **[SQLAlchemy](https://sqlalchemy.org) + aiosqlite** ‚Äî ORM + –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π SQLite
- **[–ÆKassa SDK](https://github.com/yoomoney/yookassa-sdk-python)** ‚Äî –ø—Ä–∏—ë–º –ø–ª–∞—Ç–µ–∂–µ–π
- **[aiohttp](https://aiohttp.readthedocs.io)** ‚Äî webhook-—Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ÆKassa
- **Docker** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
course-bot/
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ __main__.py          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py       # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py          # /start, –∫–∞—Ç–∞–ª–æ–≥, –º–æ–∏ –∫—É—Ä—Å—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.py           # –ö–æ—Ä–∑–∏–Ω–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment.py        # Webhook –ÆKassa
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py          # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ inline.py         # –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py           # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, –¥–≤–∏–∂–æ–∫ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py           # –ú–æ–¥–µ–ª—å User
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ course.py         # –ú–æ–¥–µ–ª—å Course
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ order.py          # –ú–æ–¥–µ–ª–∏ Order, OrderItem, Payment
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ db.py             # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
‚îÇ       ‚îî‚îÄ‚îÄ payment.py        # –†–∞–±–æ—Ç–∞ —Å API –ÆKassa
‚îú‚îÄ‚îÄ docs/                     # GitHub Pages (Mini App)
‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ webapp/                   # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ Mini App
‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ .env.example              # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ LICENSE
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- Telegram-–±–æ—Ç (—Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/BotFather))
- –ê–∫–∫–∞—É–Ω—Ç [–ÆKassa](https://yookassa.ru) (–º–æ–∂–Ω–æ —Ç–µ—Å—Ç–æ–≤—ã–π)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
git clone https://github.com/Vardges13/course-bot.git
cd course-bot
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` ‚Äî –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `BOT_TOKEN` | –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç [@BotFather](https://t.me/BotFather) |
| `YOOKASSA_SHOP_ID` | ID –º–∞–≥–∞–∑–∏–Ω–∞ –≤ –ÆKassa |
| `YOOKASSA_SECRET` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ÆKassa |
| `ADMIN_IDS` | Telegram ID –∞–¥–º–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é |
| `WEBHOOK_HOST` | –ü—É–±–ª–∏—á–Ω—ã–π URL —Å–µ—Ä–≤–µ—Ä–∞ (–¥–ª—è webhook –ÆKassa) |
| `WEBHOOK_PORT` | –ü–æ—Ä—Ç webhook-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `8080`) |
| `DATABASE_URL` | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é SQLite) |

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
docker compose up -d --build
```

–ë–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å:
- **Telegram polling** ‚Äî –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **HTTP –ø–æ—Ä—Ç 8080** ‚Äî –¥–ª—è webhook –ÆKassa

### 3. –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
pip install -r requirements.txt
python -m bot
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ –ÆKassa

–í [–ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ÆKassa](https://yookassa.ru/my/) —É–∫–∞–∂–∏—Ç–µ URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

```
https://yourdomain.com:8080/webhook/yookassa
```

–°–æ–±—ã—Ç–∏—è: `payment.succeeded` –∏ `payment.canceled`.

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| `/start` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é |
| `/admin` | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—Ç–æ–ª—å–∫–æ –¥–ª—è `ADMIN_IDS`) |

## üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–î–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —á–µ–π Telegram ID —É–∫–∞–∑–∞–Ω –≤ `ADMIN_IDS`.

- **‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å** ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –≤–≤–æ–¥: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω–∞, —Å—Å—ã–ª–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
- **üóë –£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å** ‚Äî –≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞ (–º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)
- **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –∫–æ–ª-–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞–∫–∞–∑–æ–≤, –≤—ã—Ä—É—á–∫–∞

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

| –¢–∞–±–ª–∏—Ü–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `users` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram |
| `courses` | –ö—É—Ä—Å—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω–∞, —Å—Å—ã–ª–∫–∞, —Å—Ç–∞—Ç—É—Å) |
| `orders` | –ó–∞–∫–∞–∑—ã (`pending` / `paid` / `cancelled`) |
| `order_items` | –≠–ª–µ–º–µ–Ω—Ç—ã –∑–∞–∫–∞–∑–∞ (—Å–≤—è–∑—å –∑–∞–∫–∞–∑ ‚Üî –∫—É—Ä—Å) |
| `payments` | –ü–ª–∞—Ç–µ–∂–∏ –ÆKassa (`pending` / `succeeded` / `canceled`) |

–ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

## üåê Mini App (Telegram WebApp)

–ë–æ—Ç –≤–∫–ª—é—á–∞–µ—Ç [Telegram Mini App](https://vardges13.github.io/course-bot/) ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Telegram:

- –ö–∞—Ç–∞–ª–æ–≥ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π —Å –∫—Ä–∞—Å–∏–≤—ã–º UI
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫–∞–¥–µ–º–∏–∏
- –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp API

Mini App —Ä–∞–∑–º–µ—â—ë–Ω –Ω–∞ GitHub Pages –∏–∑ –ø–∞–ø–∫–∏ `docs/`.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[MIT](LICENSE) ¬© Vardges Harutyunyan
